<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <table border="1" id="table">
        <thead>
            <td>약국 이름</td>
            <td>위도</td>
            <td>경도</td>
        </thead>
        <tbody>
            
        </tbody>
    </table>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        let rdnWhlAddr = [];
        let latitude = [];
        let longitude = [];
        const tbody = $('#table tbody');
        $.ajax({
            method:'get',
            url: "https://apis.data.go.kr/B551232/OAMS_PARMACY_01/GET_OAMS_PARMACY_01",
            dataType:'xml',
            data:{
                serviceKey:"ZKiieHbBwQGTkPhH0wZRgTVdfaeRSRiBaykZfbj9U9gd3PhlZ/SYdi0o32aqiLK1k4fxqf/AqUMu4n3kghRqHQ==",
                pageNo:1,
                numOfRows:10,
                STATION_NAME:"광주송정역"
            },
            
            success : function(result){
                // 데이터 확인
                console.log(result);
                let xml = $(result).find("response");
                let len = xml.find("item").length;
                console.log(len);
                for (var i = 0; i< len; i++){
                    rdnWhlAddr[i] = xml.find("item").eq(i).find("rdnWhlAddr").text();
                    latitude[i] = xml.find("item").eq(i).find("latitude").text();
                    longitude[i] = xml.find("item").eq(i).find("longitude").text();
                }
                console.log(rdnWhlAddr);
                console.log(latitude);
                console.log(longitude);

                for (j = 0; j<len; j++){
                    var tr = "<tr>"+
                        "<td>"+rdnWhlAddr[j]+"</td>"+
                        "<td>"+latitude[j]+"</td>"+
                        "<td>"+longitude[j]+"</td>"+
                        +"</tr>";
                    tbody.append(tr);
                }
            },
            error: function(error){
                console.log("error");
            }
        })
    </script>
</body>
</html>
